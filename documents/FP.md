# 함수형 프로그래밍을 적용해보기

만들다보니 스크롤 위치, 전체 높이, 현재 내가 있는 위치에 속한 브라우저의 높이 등 상태 관리가 전혀 되지 않았다.

변수를 이것 저것 선언하다보니 중구 난방이 되어버려서 강의를 들으면서 조금씩 수정하던 함수가 엉망이 되어버렸다.

그래서 지금 현재까지 하면서 함수를 재구성 해보려고 시도한다.

## 만들어야할 함수와 역할

1. 각 섹션의 객체 값을 세팅하는 함수

   - 함수를 읽을 때, 특정 아이디 안에 있는 섹션의 개수를 찾아, 섹션의 수 만큼 객체를 만들어 배열안에 담는 함수.

2. 레이어아웃 만드는 함수

   - 처음 실행될 때, 레이어아웃을 만드는 함수가 실행되어야한다. 각 section의 높이를 일정하게 만들어주는 함수다.

3. 전체 높이 계산하는 함수

   - 전체 높이를 계산하는 함수가 있어야한다.

4. 스크롤 지나간 높이 계산하는 함수

   - 이건 스크롤의 높이라기보다. 맨 위에서부터 지나간 스크롤을 계산하는 함수다.

- 이게 있어야 전체 높이에서 지나간 스크롤의 높이를 뺀 나머지나, 섹션의 높이에서 지나간 스크롤의 높이를 알 수 있다.

5. 현재 위치한 씬을 계산하는 함수

- 현재 스크롤이 위치한 씬이 몇번째 씬인지 계산하는 함수다.
- 각 씬의 고정 높이는 처음에 레이어아웃을 만드는 함수가 계산해준다.
  - 각 씬의 높이를 알고 있기 때문에 스크롤이 지나간 높이를 계산한 함수가 각 씬의 고정 넓이보다 얼마나 크거나 작은지를 계산하면 알 수 있다.

6. 현재 위치한 씬(섹션)의 높이를 계산하는 함수

   - 현재 위치한 씬의 높이는 고정이기 때문에 고정 높이에서 지나간 스크롤 높이를 빼면 구할 수 있다.

7. 전체 스크롤 높이에서 현재 지나간 스크롤의 높이가 얼마나 되는지 계산하는 함수

   - 이건... 음...

8. 현재 씬을 html에 알려주는 함수

   - 현재 씬 number를 html에 알려주어 특정 아이디가 있을 때마다 섹션안의 아이템이 보여지도록 하게 하는 함수

9. 섹션 안 객체의 동작 타이밍을 계산하는 함수
   - opacity, ratio 등

## 다형성

고차 함수를 잘 사용해야한다. 함수를 값으로 전달할 수 있는 것은 다른 함수에 함수를 인자로 전달하는 것도 가능하다는 것이다.

하지만 지금 문제가 생긴건.... 두 개 이상의 값을 받아야하는 함수가 없다.

1. 하나의 함수가 두개의 함수를 조합해주는 함수를 만들어야한다.

   이게 좀 어렵다. f(g(x))의 형태로 만드려고 시도했는데 어떤 함수는 f(g, h)를 받아서 실행해야하는 경우도 생긴다.

   그럼 단순하게 값을 받아서 실행한다음 반환값으로 값을 넘기게 되면 어떨까?

   이렇게 하면 결국에는 이전에 변수를 관리하는 것과 거의 같은 상황이 될 수 도 있다.
   하지만...
   처음부터 너무 완벽하게 설계하려고 하지말고 일단...
   **두 개 이상의 함수를 받아서 값을 반환하는 함수를 만들어보자!!**
